<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Medical Store Billing</title>
<link rel="stylesheet" href="css/style.css">
</head>

<body>

<div class="app">

<header class="header">
    <h1>üíä Medical Store Billing</h1>
    <p>Fast ‚Ä¢ Simple ‚Ä¢ Accurate</p>
</header>

<div class="card">
    <input type="text" id="search" placeholder="üîç Search tablet..." onkeyup="searchProduct()">

    <div class="table-container">
        <table>
            <thead>
            <tr>
                <th>#</th>
                <th>Tablet Name</th>
                <th>Rate (‚Çπ)</th>
                <th>Qty</th>
                <th>Total (‚Çπ)</th>
            </tr>
            </thead>
            <tbody id="productTable"></tbody>
        </table>
    </div>
</div>

<div class="summary card sticky-summary">

    <div class="row">
        <span>Sub Total</span>
        <span>‚Çπ <span id="subTotal">0.00</span></span>
    </div>
    <div class="row">
        <span>5% Charge</span>
        <span>‚Çπ <span id="tax">0.00</span></span>
    </div>
    <div class="row total">
        <span>Grand Total</span>
        <span>‚Çπ <span id="grandTotal">0.00</span></span>
    </div>

    <button onclick="printBill()">üñ®Ô∏è Print / Save Bill</button>
</div>

</div>

<!-- PRINT AREA -->
<div id="printArea" class="print-card">
    <h2 class="print-title">Medical Store Bill</h2>

    <table class="print-table">
        <thead>
        <tr>
            <th>Tablet</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Total</th>
        </tr>
        </thead>
        <tbody id="billTable"></tbody>
    </table>

    <div class="print-summary">
        <div>
            <span>Sub Total</span>
            <span>‚Çπ <span id="printSub">0.00</span></span>
        </div>
        <div>
            <span>5% Charge</span>
            <span>‚Çπ <span id="printTax">0.00</span></span>
        </div>
        <div class="print-grand">
            <span>Grand Total</span>
            <span>‚Çπ <span id="printTotal">0.00</span></span>
        </div>
    </div>
</div>

<script>
const products = [
 {name:"ACETOSE RB (CAP)", rate:160},
 {name:"ACETOSE P TABLET (70)", rate:70},
 {name:"ACETOSE P TABLET (120)", rate:120},
 {name:"ALTOCOLD-PLUS TAB", rate:110},
 {name:"ALTOPAN-DSR CAP", rate:125},
 {name:"ALTOPAN 40", rate:80},
 {name:"CAMICEF-CV TAB", rate:590},
 {name:"CAMIBRO 200SR TABLETS", rate:210},
 {name:"CIALIN 600 TABLETS", rate:490},
 {name:"DAPACAM-M 10/500", rate:350},
 {name:"DICOMUST GEL", rate:14},
 {name:"ESOMUST-DSR CAP", rate:130},
 {name:"FEROMOR-XT TABLETS", rate:130},
 {name:"LEVOTOSE-PLUS TABLETS", rate:135},
 {name:"NITROCIA-100 SR TAB", rate:180},
 {name:"OFLOWISE-200 TAB", rate:120},
 {name:"OFLOWISE OZ", rate:220},
 {name:"RIZALTO-DSR CAP", rate:110},
 {name:"TRYCIA D TABLET", rate:280},
 {name:"TRYOCAM FORTE", rate:290},
 {name:"VILDARON-M-50/500 TABLET", rate:300},
 {name:"VITOCIA-4G S/G", rate:250}
];

const table = document.getElementById("productTable");

function loadProducts() {
    products.forEach((p, i) => {
        table.innerHTML += `
        <tr>
            <td>${i+1}</td>
            <td>${p.name}</td>
            <td>${p.rate}</td>
            <td><input type="number" min="0" value="0" oninput="updateBill()"></td>
            <td class="rowTotal">0</td>
        </tr>`;
    });
}

function updateBill() {
    let subTotal = 0;
    let billHTML = "";

    document.querySelectorAll("#productTable tr").forEach(row => {
        const qty = Number(row.querySelector("input").value);
        const rate = Number(row.cells[2].innerText);
        const total = qty * rate;
        row.querySelector(".rowTotal").innerText = total;

        if (qty > 0) {
            billHTML += `
            <tr>
                <td>${row.cells[1].innerText}</td>
                <td>${qty}</td>
                <td>${rate}</td>
                <td>${total}</td>
            </tr>`;
            subTotal += total;
        }
    });

    const tax = subTotal * 0.05;
    const grandTotal = subTotal + tax;

    billTable.innerHTML = billHTML;
    subTotalSpan.innerText = subTotal.toFixed(2);
    taxSpan.innerText = tax.toFixed(2);
    grandTotalSpan.innerText = grandTotal.toFixed(2);

    printSub.innerText = subTotal.toFixed(2);
    printTax.innerText = tax.toFixed(2);
    printTotal.innerText = grandTotal.toFixed(2);
}

const subTotalSpan = document.getElementById("subTotal");
const taxSpan = document.getElementById("tax");
const grandTotalSpan = document.getElementById("grandTotal");

function searchProduct() {
    const value = search.value.toLowerCase();
    document.querySelectorAll("#productTable tr").forEach(row => {
        row.style.display = row.cells[1].innerText.toLowerCase().includes(value) ? "" : "none";
    });
}

function printBill() {
    updateBill();
    window.print();
}

loadProducts();
</script>

</body>
</html>
